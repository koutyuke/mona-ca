ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰(Mobile, Web)ã§ã®ãƒ«ãƒ¼ãƒ«ã§ã‚ã‚‹ã€‚

åŸºæœ¬çš„ã«å…¨ä½“å…±é€šã®ãƒ«ãƒ¼ãƒ«ã‚’è¨˜è¼‰ã—ã¦ã„ã‚‹ãŒãƒ‰ãƒ¡ã‚¤ãƒ³å›ºæœ‰ã®ãƒ«ãƒ¼ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã€‚ãã®å ´åˆã¯ãƒ«ãƒ¼ãƒ«ã®å…ˆé ­ã«çµµæ–‡å­—ã‚’è¨˜è¼‰ã™ã‚‹ã“ã¨ã€‚

ğŸŒÂ - Webé ˜åŸŸ

ğŸ“±Â - Mobileé ˜åŸŸ

ğŸ¨Â - UI Packageé ˜åŸŸ

# ç›®çš„

---

- Feature-Sliced Designï¼ˆä»¥ä¸‹FSDï¼‰ã¨ Presenter/Containerï¼ˆä»¥ä¸‹P/Cï¼‰ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’**çŸ›ç›¾ãªãä½µç”¨**ã™ã‚‹ãŸã‚ã®ãƒ«ãƒ¼ãƒ«ã‚’å®šç¾©ã™ã‚‹
- Storybook / Test ã§ã¯ Presenter ã‚’ç›´æ¥è§¦ã‚Œã¦é–‹ç™ºä½“é¨“ã‚’è‰¯ãã™ã‚‹
- åˆ©ç”¨è€…ãŒã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Ÿè£…ã‚’çŸ¥ã‚‰ãªãã¦ã‚‚ãã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã«ã™ã‚‹

# ãƒ¬ã‚¤ãƒ¤ãƒ¼æ–¹é‡ï¼ˆFSDï¼‰

---

ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨ã—ã¦Feature-Sliced Design(FSD)ã‚’æ¡ç”¨ã™ã‚‹ã€‚

ãã‚Œã«ã‚ãŸã‚Šã€FSDã«ã¯Layer, Slice, SegmentãŒå­˜åœ¨ã—ã¦ã„ã‚‹ã€‚è©³ã—ãã¯å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¸ã€‚

**FSDå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**

[Welcome | Feature-Sliced Design](https://feature-sliced.design/)

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

---

[Layers | Feature-Sliced Design](https://feature-sliced.design/docs/reference/layers)

```
./src/
â”œâ”€â”€ app             // framework dir
â””â”€â”€ layers          // FSD dir
    â”œâ”€â”€ app
    â”œâ”€â”€ entities
    â”œâ”€â”€ features
    â”œâ”€â”€ pages
    â”œâ”€â”€ shared
    â””â”€â”€ widgets
```

FSDã®å®Ÿè£…ã¯ã‚’ãã®ã¾ã¾ `src` é…ä¸‹ã«ãŠã„ã¦ã—ã¾ã†ã¨ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã§ä½¿ç”¨ã™ã‚‹`app`ã¨FSDã®`app`ãŒç«¶åˆã—ã¦ã—ã¾ã†ã€‚ãã®ãŸã‚FSDã®å®Ÿè£…ã‚’ `layers` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã«ã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å›ºæœ‰ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãªã©ã¯ `app` é…ä¸‹ã«å®Ÿè£…ã™ã‚‹ã€‚

## å…¬é–‹ãƒãƒªã‚·ãƒ¼

---

[Public API | Feature-Sliced Design](https://feature-sliced.design/docs/reference/public-api)

å®Ÿè£…ã—ãŸã‚‚ã®ã‚’å…¬é–‹ã—ãŸã„å ´åˆã€Public APIã¨ã—ã¦ `index.ts` ã§å†exportã™ã‚‹ã‚ˆã†ã«è¨­è¨ˆã™ã‚‹ã€‚

ã¾ãŸã€åå‰ç©ºé–“ãŒãã¡ã‚ƒãã¡ã‚ƒã«ãªã‚‰ãªã„ã‚ˆã†ã™ã‚‹ãŸã‚ `layers` é…ä¸‹ã§ã¯default exportã¯ç¦æ­¢ã—å…¨ã¦named exportÂ ã§å…¬é–‹ã™ã‚‹ã€‚

### ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã®å ´æ‰€

---

`shared/ui`Â ã¨Â `shared/lib`

- å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç›´ä¸‹ ã«Â `index.ts`Â ã‚’ç½®ã
- ä¾‹:Â `shared/ui/button/index.ts`

`shared/ui`Â ã¨Â `shared/lib` ä»¥å¤–ã®ã‚¹ãƒ©ã‚¤ã‚¹ã‚’æŒãŸãªã„ãƒ¬ã‚¤ãƒ¤ãƒ¼(`shared` ,`app` )

- å„ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ(`ui`,Â `model`,Â `lib`Â )ç›´ä¸‹ã«Â `index.ts`Â ã‚’ç½®ã
- ä¾‹:Â `shared/api/index.ts`

ã‚¹ãƒ©ã‚¤ã‚¹ã‚’æŒã¤ãƒ¬ã‚¤ãƒ¤ãƒ¼(`entities/*`,Â `features/*`,Â `widgets/*`,Â `pages/*` )

- **ã‚¹ãƒ©ã‚¤ã‚¹ç›´ä¸‹** ã«ã ã‘Â `index.ts`Â ã‚’ç½®ã
- `ui/`,Â `model/`,Â `lib/`Â ãªã©ã®ã‚»ã‚°ãƒ¡ãƒ³ãƒˆç›´ä¸‹ã«è¿½åŠ ã®Â `index.ts`Â ã¯ä½œã‚‰ãªã„
- ä¾‹: `features/auth/index.ts`

## ä¾å­˜ã®æ–¹å‘

---

ä¸Šä½â†’ä¸‹ä½ã¸ä¸€æ–¹å‘ã«ãªã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨

ä¸‹ä½ï¼ˆentitiesï¼‰ãŒä¸Šä½ï¼ˆfeaturesç­‰ï¼‰ã«ä¾å­˜ã™ã‚‹ã®ã¯ä¸å¯ã€‚

<aside>
ğŸ¢

**ãƒ¬ã‚¤ãƒ¤ãƒ¼ä¸€è¦§**

1. app
2. pages
3. widgets
4. features
5. entities
6. shared
</aside>

# Presenter / Container Pattern

---

ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã—ã¦Presenter / Container Patternã‚’æ¡ç”¨ã™ã‚‹ã€‚

ã“ã®ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯Componentã‚’UIå°‚æ¥­ã®Presenterã¨ãƒ­ã‚¸ãƒƒã‚¯ã‚„å‰¯ä½œç”¨ã‚’æ‰±ã†Containerã«åˆ†é›¢ã—Storybookã‚„Testã‚’è¨˜è¿°ã—ã‚„ã™ãã™ã‚‹ã‚‚ã®ã§ã‚ã‚‹ã€‚

ã¾ãŸã€Containerã®æ³¨å…¥æ–¹æ³•ã¨ã—ã¦Compositionã‚’æ¡ç”¨ã™ã‚‹ã€‚

ãƒ­ã‚¸ãƒƒã‚¯ã¯åŸºæœ¬çš„ã«hooksã¨ã—ã¦ã¾ã¨ã‚ã‚‹ã€‚

## **Presenter ã¨ Container ã«ã¤ã„ã¦**

---

### Presenter

---

UIå°‚æ¥­ã€‚ç´”ç²‹é–¢æ•°ãªPure Componentã§ã‚ã‚‹ã€‚ä¾å­˜å…ˆã¯åŒå±¤ãƒ»ä¸‹å±¤ã®Presenter/UIã®ã¿ã€‚

**ã‚„ã£ã¦ã„ã„ã“ã¨**

- Propsã®è¡¨ç¤º
- UIå›ºæœ‰ã® `useState` ã¯æŒã£ã¦ã‚ˆã„ï¼ˆé–‹é–‰ã€hoverã€é¸æŠãªã©ï¼‰ã€‚

**ã‚„ã£ã¦ã¯ãƒ€ãƒ¡ãªã“ã¨**

- ãƒ‡ãƒ¼ã‚¿å–å¾—ãªã©ã®å‰¯ä½œç”¨ï¼ˆAPIå‘¼ã³å‡ºã—ã€routingå‰¯ä½œç”¨ç­‰ï¼‰ã€‚
- å‚ç…§é€éæ€§ã«ãªã‚‰ãªã„è¡Œç‚º
    - Propsã®ç ´å£Šçš„ãƒ¡ã‚½ãƒƒãƒ‰ã®ä½¿ç”¨ãªã©
- Containerã‚’ãƒ¬ãƒ³ãƒ€ãƒ¼ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã€‚
    - Containerã‚’å…¥ã‚ŒãŸã„å ´åˆã¯Compositionã§æŒ¿å…¥ã™ã‚‹ã€‚

### **Container**

---

ãƒ‡ãƒ¼ã‚¿å–å¾—ã€å‰¯ä½œç”¨ã€ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ã®çµç·šã€Presenterã¸ã®**ä¾å­˜æ³¨å…¥**ã‚’æ‹…å½“ã€‚åŸºæœ¬çš„ã«ã¯Container ã‚ˆã†ã®Presenterã‚’æç”»ã•ã›ã‚‹ãŸã‚ã«ã‚ã‚‹ã€‚

**ã‚„ã£ã¦ã„ã„ã“ã¨**

- Presenter ã« props ã‚’æ¸¡ã—ã¦æç”»
- å‰¯ä½œç”¨ã‚’æŒã¤å‡¦ç†ã®è¨˜è¿°
- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã‚’å«ã‚“ã hooksã®å®Ÿè¡Œ
- ç°¡æ˜“çš„ãªUIè¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè¡Œ

**ã‚„ã£ã¦ã¯ãƒ€ãƒ¡ãªã“ã¨**

- UIé–¢é€£ã®è¨˜è¿°
    - ã‚¹ã‚¿ã‚¤ãƒ«ã®é©å¿œ

### å‘½åè¦å‰‡

---

**Presenter**

- Containerã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚ã‚‹å ´åˆ: `*.ui.tsx` / `*UI`
    - ä¾‹: `foo.ui.tsx` / `FooUI`
- Containerã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒãªã„å ´åˆ: `*.tsx` / ãã®ã¾ã¾
    - å†…éƒ¨å®Ÿè£…ãŒ Presenter ã§ã‚ã‚‹äº‹å®Ÿã‚’éš ã—ã€`UserAvatar`Â ã®ã‚ˆã†ãªä¸­ç«‹åã§å…¬é–‹ã™ã‚‹ã€‚
    - ä¾‹: `foo.tsx` / `Foo`

**Container**

- `*.tsx` / ãã®ã¾ã¾
    - ä¾‹: `foo.tsx` / `Foo`

### Presenterã¨Containerã®é–¢ä¿‚

---

|  | **é…ç½®ã—ã¦ã‚‚ã„ã„ã‹** | **å‚™è€ƒ** |
| --- | --- | --- |
| **Presenterã®ä¸­ã«Presenter** | âœ… |  |
| **Presenterã®ä¸­ã«Container** | âŒ | Containerã‚’å…¥ã‚ŒãŸã„å ´åˆã¯Compositionã§æ³¨å…¥ |
| **Containerã®ä¸­ã«Presenter** | âœ… |  |
| **Containerã®ä¸­ã«Container** | âœ… | Presenterã®å¼•æ•°ã«å…¥ã‚Œã‚‹æ™‚ã®ã¿ |

### ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ¥ã®å…¬é–‹æ–¹é‡

---

- **Presenter ã®ã¿å…¬é–‹:** `Shared` / `Entity`
  - Container ã¯ç½®ã‹ãªã„
- **åŸºæœ¬ã¯ Container ã‚’å…¬é–‹:** `features` / `widgets` / `pages`
  - Presenter ã‚’å…¬é–‹ã™ã‚‹æ™‚ã¯Containerã¨ã—ã¦å…¬é–‹ã™ã‚‹
  - Presenter ã¯ Story/Test/çµ„ã¿è¾¼ã¿ç”¨ã«**é–‹ç™ºæ™‚ç”¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ**ã‹ã‚‰å‚ç…§

## Composition / Handler

---

Presenterã«å¯¾ã—ã¦ãƒãƒ³ãƒ‰ãƒ©ã‚„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’Propsã‚’é€šã˜ã¦æ¸¡ã™

**ä½¿ã†åŸºæº–**

- Presenter å´ãŒã€Œå·®ã—æ›¿ãˆå¯èƒ½ãªéƒ¨ä½ã€ã‚„ã€Œå‹•ä½œï¼ˆå‰¯ä½œç”¨ï¼‰ã‚’å‘¼ã¶æ¥ç‚¹ (= Container Componentãªã©)ã€ã‚’æŒã¤å ´åˆã€‚
- Feature ç‰¹æœ‰ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚„ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚’Â **ä¸Šä½ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‹ã‚‰æ³¨å…¥**ã—ãŸã„å ´åˆï¼ˆä¸‹ä½ã«ä¸Šä½ã‚’ä¾å­˜ã•ã›ãªã„ãŸã‚ï¼‰ã€‚

**æ³¨å…¥ã®å½¢**

- `actions`ï¼ˆå‰¯ä½œç”¨ãƒãƒ³ãƒ‰ãƒ©ã®é›†åˆï¼‰
- `slots`ï¼ˆå·®ã—æ›¿ãˆå¯èƒ½ãªå°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰

## Storybook / Test

---

ä¸»ã«Unit Testã¯Presenterã‚’ç”¨ã„ã¦è¨˜è¿°ã—ã€Integration Testã¯Containerã‚’ç”¨ã„ã¦è¡Œã†ã€‚

Storybookã¯Presenterã§ä½œæˆã™ã‚‹ã€‚

Storybook/Test ã§ã®Presenterã‚„ãƒ¢ãƒƒã‚¯ä½œæˆç­‰ã¯**é–‹ç™ºæ™‚ç”¨ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã¿**ã‚’ä½¿ã†

|  | ã‚„ã‚‹ã“ã¨ |
| --- | --- |
| **Presenter** | `Unit Test` `Storybook` |
| **Container** | `Integration Test` `E2E Test` |

### é–‹ç™ºæ™‚ç”¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ

---

Storybookã‚„Testã‚’ä½œæˆã™ã‚‹ã¨ãã«ä½¿ç”¨ã™ã‚‹ãƒ¢ãƒƒã‚¯ã‚„Presenterãªã©ã‚’ã¾ã¨ã‚ã¦å…¬é–‹ã™ã‚‹ã‚‚ã®
ä¸»ã«Containerã«ç´ã¥ãPresenterã‚’å…¬é–‹ã—ãŸã‚Šã€Storybookã‚„Testã§ä½¿ç”¨ã™ã‚‹ãŸã‚ã®Propsã‚’å…¬é–‹ã—ãŸã‚Šã™ã‚‹ã€‚

**å‘½åè¦å‰‡**

é–‹ç™ºæ™‚ç”¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ `__DEV_*` ã¨ã„ã†å‘½åè¦å‰‡ã‚’ä½¿ã†ã€‚
- `__DEV_*`

ãƒ•ã‚¡ã‚¤ãƒ«åã¯ `*.dev.ts(x)` ã¨ã„ã†å‘½åè¦å‰‡ã‚’ä½¿ã†ã€‚

```jsx
const __DEV_Foo = {
	ui: ...,             // UI Component
	props: (over) => {
		foo: ...,
		var: ...,
		baz: ...,
		...over
	},
	...
}
```
