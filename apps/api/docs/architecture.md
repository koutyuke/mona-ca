# ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

mona-ca Backend APIã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆã¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã‚’èª¬æ˜ã™ã‚‹ã€‚

> ğŸ“– **é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**
>
> - [README](./README.md) - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç›®æ¬¡
> - [å®Ÿè£…ã‚¬ã‚¤ãƒ‰](./guides.md) - å®Ÿè£…è¦ç´„ã¨ãƒ†ã‚¹ãƒˆæˆ¦ç•¥
> - [å‚è€ƒè³‡æ–™](./references.md) - è£œè¶³æƒ…å ±ã¨å‚è€ƒãƒªã‚½ãƒ¼ã‚¹

## ç›®æ¬¡

- [æ¦‚è¦](#æ¦‚è¦)
- [æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯](#æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯)
- [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³)
- [ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ](#ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ)
- [ãƒ¬ã‚¤ãƒ¤ãƒ¼é–“ã®ä¾å­˜é–¢ä¿‚](#ãƒ¬ã‚¤ãƒ¤ãƒ¼é–“ã®ä¾å­˜é–¢ä¿‚)

## æ¦‚è¦

mona-ca Backend APIã¯ã€Clean Architectureã‚’ãƒ™ãƒ¼ã‚¹ã¨ã—ãŸå¤šå±¤ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’æ¡ç”¨ã—ã¦ã„ã‚‹ã€‚
å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒæ˜ç¢ºãªè²¬å‹™ã‚’æŒã¡ã€ä¾å­˜é–¢ä¿‚ã®æ–¹å‘ãŒä¸€æ–¹é€šè¡Œã«ãªã‚‹ã‚ˆã†è¨­è¨ˆã•ã‚Œã¦ã„ã‚‹ã€‚

### è¨­è¨ˆåŸå‰‡

- **Clean Architecture**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚„ã‚¤ãƒ³ãƒ•ãƒ©ã‹ã‚‰ç‹¬ç«‹ã•ã›ã‚‹
- **Repository Pattern**: ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’æŠ½è±¡åŒ–
- **SOLID Principles**: ä¿å®ˆæ€§ã¨æ‹¡å¼µæ€§ã‚’é«˜ã‚ã‚‹è¨­è¨ˆåŸå‰‡
- **Dependency Injection**: ä¾å­˜é–¢ä¿‚ã‚’å¤–éƒ¨ã‹ã‚‰æ³¨å…¥ã—ã€ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£ã‚’å‘ä¸Š
- **Feature-based Organization**: ãƒ‰ãƒ¡ã‚¤ãƒ³æ©Ÿèƒ½ã”ã¨ã«ã‚³ãƒ¼ãƒ‰ã‚’æ•´ç†

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ç”¨é€” |
| --- | --- | --- |
| Runtime | Bun | JavaScript/TypeScriptãƒ©ãƒ³ã‚¿ã‚¤ãƒ  |
| Platform | Cloudflare Workers | ã‚¨ãƒƒã‚¸ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ç’°å¢ƒ |
| Framework | ElysiaJS | Web API Framework |
| ORM | Drizzle ORM | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹ |
| Database | Cloudflare D1 | SQLiteãƒ™ãƒ¼ã‚¹ã®ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹DB |
| Auth Core | Lucia | èªè¨¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆå‚è€ƒå®Ÿè£…ï¼‰ |
| Auth Utils | Oslo | èªè¨¼ç³»ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ |
| OAuth | Arctic | OAuth 2.0ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ |
| Email | Resend | ãƒ¡ãƒ¼ãƒ«é€ä¿¡API |
| Rate Limiting | Upstash Rate Limit | ãƒ¬ãƒ¼ãƒˆåˆ¶é™ |
| Cache | Upstash Redis | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¹ãƒˆã‚¢ |
| Password Hashing | Argon2id (WASM) | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥åŒ– |
| Testing | Vitest | ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
| Linter/Formatter | Biome | ã‚³ãƒ¼ãƒ‰å“è³ªç®¡ç† |

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³

### ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€ 

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Presentation Layer          â”‚  routes/
â”‚        (ElysiaJS Routes)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        Adapter Layer                â”‚  features/*/adapters/
â”‚  (Presenters, Repositories,         â”‚
â”‚   Gateways)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        Application Layer            â”‚  features/*/application/
â”‚        (Use Cases, Ports)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Domain Layer                â”‚  features/*/domain/
â”‚  (Entities, Value Objects)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Infrastructure Layer           â”‚  core/infra/
â”‚  (Drizzle, Crypto, Config)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®è²¬å‹™

#### 1. Presentation Layer (`routes/`)

- HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å®šç¾©
- ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆElysiaã‚¹ã‚­ãƒ¼ãƒï¼‰
- OpenAPI/Swaggerå®šç¾©
- Pluginã®é©ç”¨ï¼ˆCORS, Auth Guard, Rate Limitç­‰ï¼‰

**ãƒ«ãƒ¼ãƒ«**:

- UseCaseã®å®Ÿè¡Œã¨çµæœã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ã¿ã‚’è¡Œã†
- ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å«ã¾ãªã„
- DIã‚³ãƒ³ãƒ†ãƒŠã‹ã‚‰å¿…è¦ãªä¾å­˜é–¢ä¿‚ã‚’å–å¾—
- Presenterã‚’ä½¿ç”¨ã—ã¦ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’æ•´å½¢

#### 2. Adapter Layer (`features/*/adapters/`)

å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ ã‚„ã‚¤ãƒ³ãƒ•ãƒ©ã¨ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã‚’ç¹‹ãå¤‰æ›å±¤ã€‚

**Repositories** (`repositories/`):

- ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ã®å¤‰æ›
- Repository Interfaceã®å®Ÿè£…
- Drizzle ORMã‚’ä½¿ç”¨ã—ãŸCRUDæ“ä½œ

**Presenters** (`presenters/`):

- ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’HTTPãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«å¤‰æ›
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¹ã‚­ãƒ¼ãƒã®å®šç¾©
- ãƒ‡ãƒ¼ã‚¿ã®æ•´å½¢ï¼ˆæ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã€nullå‡¦ç†ç­‰ï¼‰

**Gateways** (`gateways/`):

- å¤–éƒ¨APIã¨ã®é€šä¿¡ï¼ˆOAuth Provider, Email, Turnstileç­‰ï¼‰
- Gateway Interfaceã®å®Ÿè£…

#### 3. Application Layer (`features/*/application/`)

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’å®Ÿè£…ã€‚

**Use Cases** (`use-cases/`):

- ãƒ“ã‚¸ãƒã‚¹ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã®å®Ÿè£…
- è¤‡æ•°ã®Repositoryã‚„Gatewayã‚’çµ„ã¿åˆã‚ã›
- ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å¢ƒç•Œã®å®šç¾©
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- Resultå‹ï¼ˆ`ok()`, `err()`ï¼‰ã§ã®çµæœè¿”å´

**Inbound Ports** (`ports/in/`):

- UseCaseã®Interfaceå®šç¾©
- å…¥åŠ›/å‡ºåŠ›å‹ã®å®šç¾©

**Outbound Ports** (`ports/out/`):

- Repository Interfaceã®å®šç¾©
- Gateway Interfaceã®å®šç¾©
- ä»–ã®ã‚µãƒ¼ãƒ“ã‚¹Interfaceå®šç¾©

#### 4. Domain Layer (`features/*/domain/`)

ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®ä¸­æ ¸ã€‚ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚„ã‚¤ãƒ³ãƒ•ãƒ©ã«ä¾å­˜ã—ãªã„ã€‚

**Entities** (`entities/`):

- ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®å®šç¾©
- ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯
- ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯

**Value Objects** (`value-objects/`):

- ä¸å¤‰ãªå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯
- IDã‚„ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ç­‰

#### 5. Infrastructure Layer (`core/infra/`)

æŠ€è¡“çš„ãªåŸºç›¤ã‚’æä¾›ã€‚

- **Config**: ç’°å¢ƒå¤‰æ•°ç®¡ç†ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- **Crypto**: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥åŒ–ã€HMACã€ä¹±æ•°ç”Ÿæˆ
- **Drizzle**: DBã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- **Elysia**: ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒ«ãƒ‘ãƒ¼ã€Cookieç®¡ç†ã€ä¾‹å¤–ã‚¯ãƒ©ã‚¹

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```text
apps/api/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/                      # å…±é€šã‚¤ãƒ³ãƒ•ãƒ©ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
â”‚   â”‚   â”œâ”€â”€ adapters/              # å…±é€šã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤å®Ÿè£…
â”‚   â”‚   â”‚   â””â”€â”€ gateways/
â”‚   â”‚   â”œâ”€â”€ di/                    # ã‚³ã‚¢DIã‚³ãƒ³ãƒ†ãƒŠ
â”‚   â”‚   â”œâ”€â”€ domain/                # å…±é€šãƒ‰ãƒ¡ã‚¤ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
â”‚   â”‚   â”‚   â””â”€â”€ value-objects/
â”‚   â”‚   â”œâ”€â”€ infra/                 # å…±é€šã‚¤ãƒ³ãƒ•ãƒ©å®Ÿè£…
â”‚   â”‚   â”œâ”€â”€ lib/                   # å…±é€šãƒ©ã‚¤ãƒ–ãƒ©ãƒª
â”‚   â”‚   â”œâ”€â”€ ports/                 # å…±é€šãƒãƒ¼ãƒˆï¼ˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ gateways/
â”‚   â”‚   â”‚   â””â”€â”€ system/
â”‚   â”‚   â””â”€â”€ testing/               # å…±é€šãƒ†ã‚¹ãƒˆãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ»ãƒ¢ãƒƒã‚¯
â”‚   â”‚       â”œâ”€â”€ helpers/
â”‚   â”‚       â””â”€â”€ mocks/
â”‚   â”‚
â”‚   â”œâ”€â”€ features/                  # æ©Ÿèƒ½ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”‚   â””â”€â”€ [Slug]/                # å„ã‚¹ãƒ©ã‚¤ã‚¹
â”‚   â”‚       â”œâ”€â”€ adapters/          # ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼å±¤
â”‚   â”‚       â”‚   â”œâ”€â”€ gateways/
â”‚   â”‚       â”‚   â”œâ”€â”€ presenters/
â”‚   â”‚       â”‚   â””â”€â”€ repositories/
â”‚   â”‚       â”œâ”€â”€ application/       # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤
â”‚   â”‚       â”‚   â”œâ”€â”€ infra/         # Featureå›ºæœ‰ã®ã‚¤ãƒ³ãƒ•ãƒ©
â”‚   â”‚       â”‚   â”œâ”€â”€ ports/
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ in/        # UseCase Interface
â”‚   â”‚       â”‚   â”‚   â””â”€â”€ out/       # Repository/Gateway Interface
â”‚   â”‚       â”‚   â””â”€â”€ use-cases/     # UseCaseã®å®Ÿè£…
â”‚   â”‚       â”œâ”€â”€ di/                # Featureå›ºæœ‰ã®DIã‚³ãƒ³ãƒ†ãƒŠ
â”‚   â”‚       â”œâ”€â”€ domain/            # ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤
â”‚   â”‚       â”‚   â”œâ”€â”€ entities/
â”‚   â”‚       â”‚   â””â”€â”€ value-objects/
â”‚   â”‚       â”œâ”€â”€ lib/               # Featureå›ºæœ‰ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚       â”œâ”€â”€ testing/           # ãƒ†ã‚¹ãƒˆã‚µãƒãƒ¼ãƒˆ
â”‚   â”‚       â”‚   â”œâ”€â”€ fixtures/
â”‚   â”‚       â”‚   â”œâ”€â”€ helpers/
â”‚   â”‚       â”‚   â””â”€â”€ mocks/
â”‚   â”‚       â””â”€â”€ index.ts           # Featureå…¬é–‹API
â”‚   â”‚
â”‚   â”œâ”€â”€ plugins/                   # Elysiaãƒ—ãƒ©ã‚°ã‚¤ãƒ³
â”‚   â”‚
â”‚   â”œâ”€â”€ routes/                    # ãƒ«ãƒ¼ãƒˆå®šç¾©
â”‚   â”‚   â”œâ”€â”€ [Slug]/                # å„ã‚¹ãƒ©ã‚¤ã‚¹
â”‚   â”‚   â”‚   â””â”€â”€ index.ts           # ã‚¹ãƒ©ã‚¤ã‚¹å…¬é–‹API
â”‚   â”‚   â””â”€â”€ index.ts               # ãƒ«ãƒ¼ãƒˆã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚
â”‚   â””â”€â”€ index.ts                   # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
â”‚
â”œâ”€â”€ tests/                         # E2Eãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ drizzle/                       # ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ types/                         # global typeså®šç¾©
â”œâ”€â”€ docs/                          # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ vitest.config.ts
â”œâ”€â”€ wrangler.jsonc                 # Cloudflare Workersè¨­å®š
â””â”€â”€ drizzle.config.ts              # Drizzleè¨­å®š
```

### Featureæ§‹é€ ã®è©³ç´°

å„featureã¯ç‹¬ç«‹ã—ãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦æ©Ÿèƒ½ã™ã‚‹ã€‚

```text
features/[feature-name]/
â”œâ”€â”€ adapters/
â”‚   â”œâ”€â”€ gateways/          # å¤–éƒ¨APIé€šä¿¡ã®å®Ÿè£…
â”‚   â”œâ”€â”€ presenters/        # ãƒ¬ã‚¹ãƒãƒ³ã‚¹å¤‰æ›
â”‚   â””â”€â”€ repositories/      # ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å®Ÿè£…
â”‚       â””â”€â”€ [entity]/
â”‚           â”œâ”€â”€ [entity].repository.ts
â”‚           â””â”€â”€ tests/
â”‚               â”œâ”€â”€ create.test.ts
â”‚               â”œâ”€â”€ find-by-id.test.ts
â”‚               â””â”€â”€ ...
â”œâ”€â”€ application/
â”‚   â”œâ”€â”€ infra/            # Featureå›ºæœ‰ã®ã‚¤ãƒ³ãƒ•ãƒ©å®Ÿè£…
â”‚   â”œâ”€â”€ ports/            # Portsã®Interface
â”‚   â”‚   â”œâ”€â”€ in/           # UseCase Interface
â”‚   â”‚   â””â”€â”€ out/          # Repository/Gateway Interface
â”‚   â””â”€â”€ use-cases/        # UseCaseã®å®Ÿè£…
â”‚       â””â”€â”€ [domain]/
â”‚           â”œâ”€â”€ [action].usecase.ts
â”‚           â””â”€â”€ [action].usecase.test.ts
â”œâ”€â”€ di/
â”‚   â”œâ”€â”€ container.interface.ts    # DIã‚³ãƒ³ãƒ†ãƒŠInterface
â”‚   â””â”€â”€ container.ts              # DIã‚³ãƒ³ãƒ†ãƒŠå®Ÿè£…
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ entities/         # ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
â”‚   â””â”€â”€ value-objects/    # å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
â”œâ”€â”€ lib/                  # Featureå›ºæœ‰ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼
â”œâ”€â”€ testing/              # ãƒ†ã‚¹ãƒˆã‚µãƒãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ fixtures/         # ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
â”‚   â”œâ”€â”€ helpers/          # ãƒ†ã‚¹ãƒˆãƒ˜ãƒ«ãƒ‘ãƒ¼
â”‚   â””â”€â”€ mocks/           # ãƒ¢ãƒƒã‚¯å®Ÿè£…
â”‚       â”œâ”€â”€ gateways/
â”‚       â”œâ”€â”€ repositories/
â”‚       â””â”€â”€ infra/
â””â”€â”€ index.ts             # Featureå…¬é–‹API
```

## ãƒ¬ã‚¤ãƒ¤ãƒ¼é–“ã®ä¾å­˜é–¢ä¿‚

### ä¾å­˜é–¢ä¿‚ã®æ–¹å‘

```text
routes â†’ adapters â†’ application â†’ domain
  â†“         â†“           â†“
plugins   core/infra   core/lib
```

**é‡è¦ãªåŸå‰‡**:

- **Domainå±¤ã¯ä½•ã«ã‚‚ä¾å­˜ã—ãªã„**ï¼ˆç´”ç²‹ãªãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼‰
- **Applicationå±¤ã¯Domainå±¤ã®ã¿ã«ä¾å­˜**
- **Adapterå±¤ã¯Applicationå±¤ã¨Domainå±¤ã«ä¾å­˜**
- **Presentationå±¤ã¯å…¨ã¦ã«ä¾å­˜å¯èƒ½**ã ãŒã€ç›´æ¥Domainå±¤ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãªã„
- **ä¾å­˜é–¢ä¿‚ã¯Interfaceã‚’é€šã—ã¦è¡Œã†**ï¼ˆDependency Inversion Principleï¼‰

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

#### ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†ãƒ•ãƒ­ãƒ¼

```text
1. Route (Presentation)
   â†“ DIã‹ã‚‰UseCaseã‚’å–å¾—
2. UseCase (Application)
   â†“ Repositoryã‚’å‘¼ã³å‡ºã—
3. Repository (Adapter)
   â†“ Drizzle ORMã§DBæ“ä½œ
4. DrizzleService (Infrastructure)
   â†“ ãƒ‡ãƒ¼ã‚¿å–å¾—
5. Repository (Adapter)
   â†“ Entityå¤‰æ›
6. UseCase (Application)
   â†“ ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å‡¦ç†
7. Route (Presentation)
   â†“ Presenterã§å¤‰æ›
8. Response
```

#### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ•ãƒ­ãƒ¼

```text
1. UseCaseå†…ã§ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ
   â†“ Resultå‹ã§`err()`ã‚’è¿”ã™
2. Routeå±¤ã§Resultå‹ã‚’åˆ¤å®š
   â†“ ã‚¨ãƒ©ãƒ¼æ™‚ã¯`error(code, context)`ã‚’è¿”ã™
3. Error Responseã‚’è¿”ã™
```
